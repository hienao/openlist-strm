# Dockerå¼€å‘è„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†å¤šä¸ªDockerå¼€å‘è„šæœ¬æ¥ç®€åŒ–å¼€å‘ç¯å¢ƒçš„æ„å»ºå’Œå¯åŠ¨è¿‡ç¨‹ã€‚

## è„šæœ¬æ¦‚è§ˆ

### 1. dev-start.sh / dev-start.bat
**åŸºç¡€å¼€å‘å¯åŠ¨è„šæœ¬** - é€‚åˆå¿«é€Ÿå¯åŠ¨å’ŒåŸºæœ¬å¼€å‘éœ€æ±‚

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… è‡ªåŠ¨æ£€æŸ¥Dockerç¯å¢ƒ
- âœ… åˆ›å»ºå¿…è¦çš„æ•°æ®ç›®å½•
- âœ… è®¾ç½®ç¯å¢ƒå˜é‡é…ç½®
- âœ… æ„å»ºDockeré•œåƒ
- âœ… å¯åŠ¨åº”ç”¨å®¹å™¨
- âœ… å¥åº·æ£€æŸ¥å’Œåº”ç”¨çŠ¶æ€éªŒè¯
- âœ… æ˜¾ç¤ºå¸¸ç”¨å¼€å‘å‘½ä»¤

**åŸºæœ¬ç”¨æ³•:**
```bash
# Linux/macOS
./dev-start.sh          # é¦–æ¬¡å¯åŠ¨
./dev-start.sh --rebuild # é‡æ–°æ„å»ºå¹¶å¯åŠ¨
./dev-start.sh --cleanup # æ¸…ç†ç¯å¢ƒ

# Windows
dev-start.bat          # é¦–æ¬¡å¯åŠ¨
dev-start.bat --rebuild # é‡æ–°æ„å»ºå¹¶å¯åŠ¨
dev-start.bat --cleanup # æ¸…ç†ç¯å¢ƒ
```

### 2. dev-docker.sh / dev-docker.bat
**é«˜çº§Dockerç®¡ç†è„šæœ¬** - æä¾›å®Œæ•´çš„å¼€å‘ç¯å¢ƒç®¡ç†åŠŸèƒ½

**åŠŸèƒ½ç‰¹æ€§:**
- ğŸ”§ å®Œæ•´çš„ç¯å¢ƒåˆå§‹åŒ– (`install`)
- ğŸš€ æ ‡å‡†å¯åŠ¨æ¨¡å¼ (`start`)
- ğŸ“¦ é•œåƒæ„å»ºç®¡ç† (`build`, `rebuild`)
- ğŸ“‹ å®æ—¶æ—¥å¿—æŸ¥çœ‹ (`logs`, `logs-f`)
- ğŸ” æœåŠ¡çŠ¶æ€æ£€æŸ¥ (`status`)
- ğŸ’» å®¹å™¨äº¤äº’ (`exec`)
- ğŸ§¹ ç¯å¢ƒæ¸…ç† (`clean`, `clean-all`)
- ğŸ’¾ æ•°æ®å¤‡ä»½ (`backup`)
- ğŸ¥ å¥åº·æ£€æŸ¥ (`health`)

**é«˜çº§ç”¨æ³•:**
```bash
# Linux/macOS
./dev-docker.sh install           # åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ
./dev-docker.sh start             # å¯åŠ¨æœåŠ¡
./dev-docker.sh rebuild           # å¼ºåˆ¶é‡æ–°æ„å»º
./dev-docker.sh logs -f           # å®æ—¶æŸ¥çœ‹æ—¥å¿—
./dev-docker.sh exec              # è¿›å…¥å®¹å™¨
./dev-docker.sh backup            # å¤‡ä»½æ•°æ®

# Windows
dev-docker.bat install           # åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ
dev-docker.bat start             # å¯åŠ¨æœåŠ¡
dev-docker.bat rebuild           # å¼ºåˆ¶é‡æ–°æ„å»º
dev-docker.bat logs -f           # å®æ—¶æŸ¥çœ‹æ—¥å¿—
dev-docker.bat exec              # è¿›å…¥å®¹å™¨
dev-docker.bat backup            # å¤‡ä»½æ•°æ®
```

## å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡ä½¿ç”¨

1. **åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ**
   ```bash
   # é€‰æ‹©ä¸€ä¸ªè„šæœ¬æ‰§è¡Œ
   ./dev-docker.sh install    # æ¨èï¼šå®Œæ•´åˆå§‹åŒ–
   # æˆ–
   ./dev-start.sh              # ç®€å•åˆå§‹åŒ–
   ```

2. **å¯åŠ¨åº”ç”¨**
   ```bash
   ./dev-docker.sh start       # é«˜çº§è„šæœ¬
   # æˆ–
   ./dev-start.sh              # åŸºç¡€è„šæœ¬
   ```

3. **è®¿é—®åº”ç”¨**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:3111`
   - åº”ç”¨å¯åŠ¨åä¼šè‡ªåŠ¨è¿›è¡Œå¥åº·æ£€æŸ¥

### æ—¥å¸¸å¼€å‘

**æŸ¥çœ‹æ—¥å¿—:**
```bash
./dev-docker.sh logs -f        # å®æ—¶æ—¥å¿—
./dev-docker.sh logs           # æœ€è¿‘100è¡Œæ—¥å¿—
```

**é‡å¯æœåŠ¡:**
```bash
./dev-docker.sh restart        # é‡å¯å®¹å™¨
./dev-docker.sh rebuild        # é‡æ–°æ„å»ºå¹¶å¯åŠ¨
```

**è¿›å…¥å®¹å™¨è°ƒè¯•:**
```bash
./dev-docker.sh exec            # è¿›å…¥bash shell
./dev-docker.sh exec sh         # è¿›å…¥sh shell
```

## æ•°æ®ç›®å½•ç»“æ„

è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
project/
â”œâ”€â”€ data/                       # åº”ç”¨æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ db/                     # æ•°æ®åº“æ–‡ä»¶
â”‚   â””â”€â”€ tmp/                    # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ logs/                       # åº”ç”¨æ—¥å¿—
â”œâ”€â”€ strm/                       # STRMæ–‡ä»¶è¾“å‡º
â””â”€â”€ backups/                    # æ•°æ®å¤‡ä»½ï¼ˆä»…é«˜çº§è„šæœ¬ï¼‰
```

## ç¯å¢ƒé…ç½®

è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ç¯å¢ƒé…ç½®ï¼š

1. **æ£€æŸ¥.envæ–‡ä»¶** - å¦‚æœä¸å­˜åœ¨ï¼Œä»`.env.docker.example`å¤åˆ¶
2. **åˆ›å»ºå¿…è¦ç›®å½•** - è‡ªåŠ¨åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•
3. **è®¾ç½®æƒé™** - ä¸ºLinux/macOSè®¾ç½®é€‚å½“çš„æ–‡ä»¶æƒé™

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. Dockeræœªè¿è¡Œ**
```
âŒ Dockeræœªè¿è¡Œï¼Œè¯·å¯åŠ¨Docker
```
**è§£å†³æ–¹æ¡ˆ:** å¯åŠ¨Docker Desktop

**2. ç«¯å£è¢«å ç”¨**
```
âŒ åº”ç”¨å¯åŠ¨è¶…æ—¶ï¼Œè¯·æ£€æŸ¥æ—¥å¿—
```
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥ç«¯å£3111æ˜¯å¦è¢«å ç”¨
- æˆ–ä½¿ç”¨ `--port` å‚æ•°æŒ‡å®šå…¶ä»–ç«¯å£

**3. æ„å»ºå¤±è´¥**
```
âŒ é•œåƒæ„å»ºå¤±è´¥
```
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ä½¿ç”¨ `--no-cache` é€‰é¡¹é‡æ–°æ„å»º

### è°ƒè¯•å‘½ä»¤

**æŸ¥çœ‹è¯¦ç»†æ—¥å¿—:**
```bash
./dev-docker.sh logs -f
# æˆ–ä½¿ç”¨docker-composeç›´æ¥æŸ¥çœ‹
docker-compose logs -f
```

**æ£€æŸ¥å®¹å™¨çŠ¶æ€:**
```bash
./dev-docker.sh status
# æˆ–
docker-compose ps
```

**æ‰‹åŠ¨è¿›å…¥å®¹å™¨:**
```bash
docker exec -it app bash
```

## è„šæœ¬é€‰æ‹©å»ºè®®

| ä½¿ç”¨åœºæ™¯ | æ¨èè„šæœ¬ | åŸå›  |
|---------|----------|------|
| å¿«é€ŸåŸå‹å¼€å‘ | `dev-start.sh/bat` | ç®€å•å¿«é€Ÿï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚ |
| é•¿æœŸé¡¹ç›®å¼€å‘ | `dev-docker.sh/bat` | åŠŸèƒ½å®Œæ•´ï¼Œä¾¿äºç»´æŠ¤å’Œè°ƒè¯• |
| å›¢é˜Ÿåä½œ | `dev-docker.sh/bat` | ç»Ÿä¸€çš„å¼€å‘ç¯å¢ƒç®¡ç† |
| ç”Ÿäº§éƒ¨ç½²å‡†å¤‡ | `dev-docker.sh/bat` | åŒ…å«å¤‡ä»½å’Œæ¸…ç†åŠŸèƒ½ |

## é«˜çº§åŠŸèƒ½

### å¤‡ä»½æ•°æ®
```bash
./dev-docker.sh backup
# å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨ backups/ ç›®å½•
```

### æ·±åº¦æ¸…ç†
```bash
./dev-docker.sh clean-all
# åˆ é™¤å®¹å™¨ã€é•œåƒå’Œç¼“å­˜
```

### è‡ªå®šä¹‰ç«¯å£
```bash
./dev-docker.sh start --port 8080
# åœ¨ç«¯å£8080å¯åŠ¨åº”ç”¨
```

## è´¡çŒ®

å¦‚æœæ‚¨å‘ç°è„šæœ¬çš„é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š
1. æäº¤Issueæè¿°é—®é¢˜
2. æäº¤Pull Requestè´¡çŒ®ä»£ç 
3. åœ¨è®¨è®ºä¸­åˆ†äº«ä½¿ç”¨ç»éªŒ

---

**æ³¨æ„:** è¿™äº›è„šæœ¬ä¸“ä¸ºæœ¬é¡¹ç›®è®¾è®¡ï¼Œç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œã€‚