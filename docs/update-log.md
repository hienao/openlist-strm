# 更新历史

本文档记录了 OpenList to Stream 的所有版本更新内容，帮助用户了解新功能、改进和修复的问题。

## 当前版本

### v1.1.1 (2025-09-27)

#### 🛠️ 功能优化
- 🎨 **新版本提示优化**: 有新版本时提示更新
- 🧹 **cron定时任务表达式优化**: 支持unix cron表达式，自动替换成quartz定时任务表达式

#### 🐛 问题修复
- 修复nginx 特殊配置场景下请求接口报错无法使用的问题

---

## 历史版本

### v1.1.0 (2025-09-18)

#### 🛠️ 功能优化
- 🎨 **刮削规则优化**: 刮削逻辑优化，增加匹配成功率
- 🧹 **功能提示优化**: 重命名正则表达式增加使用示例，方便理解
- 🧹 **openlist 文件下载优化**: 优化从openlist下载nfo/封面图片时，原始文件302重定向导致下载失败的问题（无测试条件，如有问题issue反馈）

### v1.0.13 (2025-09-07)

#### 🐛 问题修复
- 修复上个版本引入的新创建容器，只有登录没注册的入口的问题

### v1.0.11 (2025-09-06) 数据上报部分请关注下，如不需要请自行关闭

#### ✨ 新功能
- 🔍 **数据上报系统**: 新增匿名使用数据统计功能，帮助改进产品体验（可在设置中关闭）
- 📊 **日志管理系统**: 支持日志级别配置和保留天数设置，提供更灵活的日志管理

#### 🛠️ 功能优化
- 🎨 **设置界面改进**: 新增数据上报开关、日志级别和保留天数配置选项
- 🧹 **日志清理增强**: 日志清理任务集成应用使用统计，优化清理逻辑
- 🔒 **隐私保护**: 数据上报仅收集匿名功能使用统计，不涉及用户隐私信息

#### 🐛 问题修复
- 修复前端日志API路径认证问题
- 优化后端时间戳处理逻辑
- 修复Docker环境变量配置问题

#### ⚠️ 兼容性说明
- 日志级别变更需要重启应用后生效
- 数据上报功能默认开启，可在设置中关闭

### v1.0.10 (2025-09-03)

#### ✨ 问题修复
- 修复openlist下已存在刮削NFO及图片文件时，strm目录下对应文件异常问题（建议全量刮削一次）

### v1.0.9 (2025-08-26)

#### ✨ 新功能
- 优化AI刮削逻辑，处理AI识别文件名匹配不到TMDB数据的问题（建议在设置中重置下提示词并报错）
- 日志调整

### v1.0.8 (2025-08-16)

#### ✨ 新功能
- 优化刮削逻辑，添加正则匹配，减少AI token消耗
- 添加刮削设置，优先获取openlist中已存在的刮削信息和字幕信息
- UI改版

### v1.0.7 (2025-08-04)

#### ✨ 新功能
- 手动执行时支持增量全量执行
- AI识别文件刮削优化
- 优化容器内存占用
- TMDB API 支持设置代理访问

### v1.0.1 (2025-07-30)

🎉 **项目首次发布**

#### ✨ 新功能
- 🎬 **STRM 文件生成**: 支持将 OpenList 文件列表转换为 STRM 流媒体文件
- 📋 **任务管理系统**: 完整的任务创建、编辑、删除功能
- ⏰ **定时任务调度**: 基于 Cron 表达式的自动化执行
- 🔄 **双模式更新**: 支持增量更新和全量更新两种模式
- 🔐 **用户认证**: 基于 JWT 的安全认证机制
- 🌐 **Web 界面**: 基于 Nuxt.js 3 + Vue 3 的现代化前端界面
- 🐳 **容器化部署**: 完整的 Docker 和 Docker Compose 支持

#### 🛠️ 技术栈
- **前端**: Nuxt.js 3, Vue 3, Tailwind CSS
- **后端**: Spring Boot 3, MyBatis, Quartz Scheduler
- **数据库**: SQLite
- **部署**: Docker, Nginx

#### 📦 部署方式
- Docker 单容器部署
- Docker Compose 编排部署
- 源码构建部署

---

## 版本规划

### 即将推出的功能

#### v1.2.0 (计划中)
- 🎯 **智能路径匹配**: 更智能的文件路径匹配算法
- 📱 **移动端适配**: 响应式设计优化，支持移动设备访问
- 🔄 **批量操作**: 支持批量任务操作和配置
- 📊 **数据看板**: 更丰富的数据统计和可视化界面

#### v1.3.0 (计划中)
- 🔌 **插件系统**: 支持第三方插件扩展功能
- 🌐 **多语言支持**: 国际化支持，支持英语、日语等多种语言
- 📋 **模板管理**: 任务模板功能，快速创建相似任务
- 🔔 **通知增强**: 支持钉钉、企业微信等多种通知方式

#### v1.4.0 (计划中)
- 🏗️ **集群部署**: 支持多节点集群部署
- ⚡ **性能优化**: 大幅提升处理速度和并发能力
- 🔍 **高级搜索**: 支持更复杂的文件搜索和过滤条件
- 📈 **监控告警**: 完善的系统监控和告警机制

---

## 更新说明

### 版本号规则
采用 [语义化版本](https://semver.org/lang/zh-CN/) 规范：
- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 发布周期
- **主版本**：根据重大功能更新发布，不定期
- **次版本**：每月发布一次，包含新功能改进
- **修订版本**：根据问题修复需要，随时发布

### 更新渠道
- **稳定版**：推荐生产环境使用，经过充分测试
- **测试版**：包含最新功能，适合早期体验
- **开发版**：最新代码，可能存在不稳定因素

---

## 升级指南

### 从旧版本升级

#### 1. 备份数据
升级前务必备份重要数据：
```bash
# 备份配置和数据库
tar -czf backup-$(date +%Y%m%d).tar.gz ./data/

# 备份 STRM 文件
tar -czf strm-backup-$(date +%Y%m%d).tar.gz ./strm/
```

#### 2. 停止应用
```bash
# Docker Compose 部署
docker-compose down

# Docker 直接部署
docker stop openlist-strm
```

#### 3. 拉取新版本
```bash
# 拉取最新镜像
docker pull hienao6/openlist-strm:latest

# 或指定版本
docker pull hienao6/openlist-strm:v1.1.1
```

#### 4. 重新启动
```bash
# Docker Compose 部署
docker-compose up -d

# Docker 直接部署
docker run -d \
  --name openlist-strm \
  -p 3111:80 \
  -v ./data/config:/maindata/config \
  -v ./data/db:/maindata/db \
  -v ./logs:/maindata/log \
  -v ./strm:/app/backend/strm \
  --restart always \
  hienao6/openlist-strm:latest
```

#### 5. 验证升级
1. 访问应用确认正常运行
2. 检查任务配置是否完整
3. 测试一个任务执行
4. 查看日志确认无错误

### 配置迁移
某些版本升级可能需要配置迁移：

#### v1.0.x → v1.1.x
- ✅ 无需手动迁移，配置自动兼容
- 🎨 建议查看新的系统设置选项
- 🔒 建议检查数据上报设置

#### 路径标准化更新
如果从旧版本升级到支持路径标准化的版本：
- ✅ 现有配置自动迁移
- 📁 建议确认新的目录结构
- 🔧 可根据需要调整 Docker 卷映射

---

## 问题反馈

### 报告问题
如果在使用过程中遇到问题：

1. **检查版本**: 确认使用的是最新版本
2. **查看日志**: 收集相关的错误日志
3. **搜索问题**: 查看 [GitHub Issues](https://github.com/hienao/openlist-strm/issues) 是否已有相关问题
4. **创建问题**: 提交新的 Issue，包含详细信息和复现步骤

### 功能建议
欢迎提出功能建议和改进意见：

1. **讨论想法**: 在 Discussions 中讨论新功能想法
2. **提交建议**: 在 Issues 中提交功能建议
3. **参与开发**: 欢迎提交 Pull Request

### 获取帮助
- 📖 **文档**: 查看完整的 [项目文档](../index.md)
- 💬 **社区**: 在 GitHub Discussions 中交流
- 🐛 **问题**: 通过 GitHub Issues 报告问题
- 📧 **联系**: 通过项目主页的联系方式

---

感谢您使用 OpenList to Stream！您的反馈和建议是我们持续改进的动力。