# 添加 OpenList 配置

OpenList 配置是连接您的 OpenList 服务器和 STRM 转换任务的桥梁。本页详细介绍如何添加和管理 OpenList 配置。

## 什么是 OpenList 配置？

OpenList 配置包含了连接到您的 OpenList 服务器所需的所有信息：

- 服务器地址和端口
- 认证信息（用户名和密码）
- 基础路径设置
- 其他连接参数

## 添加新配置

### 第一步：访问配置页面

1. 登录 OpenList to Stream 系统
2. 点击顶部导航栏的 **"OpenList 配置"**
3. 点击 **"添加配置"** 按钮

### 第二步：填写基本信息

#### 配置名称
给这个配置起一个容易识别的名字，例如：
- `家庭媒体服务器`
- `电影库`
- `电视剧库`
- `阿里云盘`

#### 服务器地址
填写您的 OpenList 服务器地址：

**格式示例：**
- `http://192.168.1.100:3000`（局域网地址）
- `https://openlist.example.com`（域名）
- `http://localhost:5244`（本地部署）

::: tip 注意事项
- 地址必须包含协议（http:// 或 https://）
- 确保端口号正确（默认：5244）
- 如果使用域名，确保域名可以正常解析
:::

#### 认证信息
填写 OpenList 的用户名和密码：
- **用户名**：OpenList 的登录用户名
- **密码**：OpenList 的登录密码

::: warning 安全提醒
建议为 OpenList 创建专用的 API 用户，并授予最小必要权限。
:::

#### 基础路径（可选）
如果您的 OpenList 部署在子路径下，需要填写基础路径：

**示例：**
- `/openlist` - 如果部署在 `http://domain.com/openlist`
- 留空 - 如果部署在根路径

### 第三步：高级设置（可选）

#### 连接超时
设置连接超时时间，默认 30 秒。

#### 重试次数
设置连接失败时的重试次数，默认 3 次。

#### 启用 SSL 验证
如果使用 HTTPS，可以选择是否启用 SSL 证书验证。

### 第四步：测试连接

填写完配置后，点击 **"测试连接"** 按钮：

**✅ 连接成功**
- 显示绿色成功提示
- 可以看到服务器版本信息
- 可以继续保存配置

**❌ 连接失败**
- 显示红色错误提示
- 检查以下可能的问题：
  - 服务器地址是否正确
  - 网络连接是否正常
  - 用户名密码是否正确
  - 服务器是否正在运行

### 第五步：保存配置

连接测试成功后，点击 **"保存"** 按钮完成配置创建。

## 管理现有配置

### 查看配置列表
在配置页面可以看到所有已添加的配置：

| 配置名称 | 服务器地址 | 状态 | 操作 |
|----------|------------|------|------|
| 家庭媒体服务器 | http://192.168.1.100:5244 | ✅ 正常 | 编辑/删除/测试 |
| 电影库 | https://movies.example.com | ❌ 失败 | 编辑/删除/测试 |

### 编辑配置
1. 在配置列表中找到要编辑的配置
2. 点击右侧的 **"编辑"** 按钮
3. 修改配置信息
4. 点击 **"测试连接"** 验证
5. 点击 **"保存"** 确认修改

### 删除配置
1. 在配置列表中找到要删除的配置
2. 点击右侧的 **"删除"** 按钮
3. 在确认对话框中点击 **"确认删除"**

::: danger 删除警告
删除配置后，所有使用该配置的任务将无法正常工作。请确保没有任务正在使用该配置。
:::

### 测试配置
1. 在配置列表中找到要测试的配置
2. 点击右侧的 **"测试"** 按钮
3. 查看测试结果

## 常见连接问题

### 问题 1：连接超时
**可能原因：**
- 网络连接问题
- 服务器地址错误
- 防火墙阻止连接

**解决方法：**
1. 检查网络连接
2. 验证服务器地址和端口
3. 检查防火墙设置

### 问题 2：认证失败
**可能原因：**
- 用户名或密码错误
- 用户权限不足

**解决方法：**
1. 确认用户名和密码
2. 检查用户是否有访问权限
3. 尝试在 OpenList 中手动登录测试

### 问题 3：SSL 证书错误
**可能原因：**
- 使用自签名证书
- 证书过期

**解决方法：**
1. 禁用 SSL 验证（仅测试环境）
2. 更新证书
3. 使用有效的 SSL 证书

## 最佳实践

### 1. 命名规范
使用描述性的配置名称：
- ✅ `家庭电影库-阿里云盘`
- ✅ `电视剧库-NAS`
- ❌ `配置1`
- ❌ `test`

### 2. 网络优化
- 优先使用局域网地址（更快）
- 确保网络连接稳定
- 考虑使用 CDN 加速

### 3. 安全考虑
- 定期更新密码
- 使用专用 API 账户
- 启用 HTTPS（如可能）

### 4. 备份配置
定期备份重要的配置信息，以防意外丢失。

## 在任务中使用配置

创建任务时，可以从下拉列表中选择已配置的 OpenList 服务器：

1. 进入 [任务管理](./add-task.md)
2. 点击 **"添加任务"**
3. 在 **"选择 OpenList 配置"** 下拉列表中选择配置
4. 系统会自动加载该服务器的路径列表

## 故障排除

### 查看连接日志
在系统日志中可以查看详细的连接信息：
1. 访问 [日志页面](./log.md)
2. 筛选 "OpenList 连接" 相关日志
3. 查看具体的错误信息

### 联系支持
如果问题仍未解决，可以：
1. 查看 [常见问题](./faq.md)
2. 在 [GitHub Issues](https://github.com/hienao/openlist-strm/issues) 提交问题
3. 提供详细的错误信息和配置内容

---

现在您已经学会了如何添加和管理 OpenList 配置，接下来可以 [创建您的第一个转换任务](./add-task.md)。